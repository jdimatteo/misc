<?xml version='1.0' encoding='UTF-8'?>
<project>
  <actions/>
  <description></description>
  <keepDependencies>false</keepDependencies>
  <properties>
    <hudson.model.ParametersDefinitionProperty>
      <parameterDefinitions>
        <hudson.model.ChoiceParameterDefinition>
          <name>selection</name>
          <description>&lt;p&gt;Dataset selection, organized by genome, then by source, then by cell type.  The different categories of selections are listed below.  Please note that you can press a key to skip to the appropriate section (e.g. hit the &quot;b&quot; key when in the drop down menu to skip to the BE2C section).
&lt;table style=&quot;border:1px solid black;border-collapse:collapse;&quot;&gt;
&lt;tr&gt;
 &lt;th style=&quot;border:1px solid black;&quot;&gt;Selection&lt;/th&gt;
 &lt;th style=&quot;border:1px solid black;&quot;&gt;Genome&lt;/th&gt;
 &lt;th style=&quot;border:1px solid black;&quot;&gt;Source&lt;/th&gt;
 &lt;th style=&quot;border:1px solid black;&quot;&gt;Cell Type&lt;/th&gt;
&lt;/tr&gt;
&lt;tr&gt;
 &lt;td style=&quot;border:1px solid black;&quot;&gt;LY1_*&lt;/td&gt;
 &lt;td style=&quot;border:1px solid black;&quot;&gt;HG18&lt;/td&gt;
 &lt;td style=&quot;border:1px solid black;&quot;&gt;Diffuse large B-cell lymphoma&lt;/td&gt;
 &lt;td style=&quot;border:1px solid black;&quot;&gt;LY1&lt;/td&gt;
&lt;tr&gt;
&lt;tr&gt;
 &lt;td style=&quot;border:1px solid black;&quot;&gt;MM1S_*&lt;/td&gt;
 &lt;td style=&quot;border:1px solid black;&quot;&gt;HG18&lt;/td&gt;
 &lt;td style=&quot;border:1px solid black;&quot;&gt;Multiple Myeloma&lt;/td&gt;
 &lt;td style=&quot;border:1px solid black;&quot;&gt;MM1S&lt;/td&gt;
&lt;tr&gt;
&lt;tr&gt;
 &lt;td style=&quot;border:1px solid black;&quot;&gt;BE2C_*&lt;/td&gt;
 &lt;td style=&quot;border:1px solid black;&quot;&gt;HG18&lt;/td&gt;
 &lt;td style=&quot;border:1px solid black;&quot;&gt;Neuroblastoma&lt;/td&gt;
 &lt;td style=&quot;border:1px solid black;&quot;&gt;BE2C&lt;/td&gt;
&lt;tr&gt;
&lt;tr&gt;
 &lt;td style=&quot;border:1px solid black;&quot;&gt;SKNAS_*&lt;/td&gt;
 &lt;td style=&quot;border:1px solid black;&quot;&gt;HG18&lt;/td&gt;
 &lt;td style=&quot;border:1px solid black;&quot;&gt;Neuroblastoma&lt;/td&gt;
 &lt;td style=&quot;border:1px solid black;&quot;&gt;SKNAS&lt;/td&gt;
&lt;tr&gt;
&lt;/table&gt;</description>
          <choices class="java.util.Arrays$ArrayList">
            <a class="string-array">
              <string>LY1_BCL6_DMSO</string>
              <string>LY1_BCL6_JQ1</string>
              <string>LY1_BRD4_DMSO</string>
              <string>LY1_BRD4_DMSO_2</string>
              <string>LY1_BRD4_JQ1</string>
              <string>LY1_BRD4_JQ1_2</string>
              <string>LY1_E2F1_DMSO</string>
              <string>LY1_E2F1_JQ1</string>
              <string>LY1_H3K27AC_DMSO</string>
              <string>LY1_H3K27AC_JQ1</string>
              <string>LY1_H3K27ME3_DMSO</string>
              <string>LY1_H3K27ME3_JQ1</string>
              <string>LY1_H3K4ME3_DMSO</string>
              <string>LY1_H3K4ME3_JQ1</string>
              <string>LY1_MED1_WT</string>
              <string>LY1_RNA_POL2_DMSO</string>
              <string>LY1_RNA_POL2_DMSO_2</string>
              <string>LY1_RNA_POL2_JQ1</string>
              <string>LY1_RNA_POL2_JQ1_2</string>
              <string>LY1_WCE_DMSO</string>
              <string>LY1_WCE_DMSO_2</string>
              <string>LY1_WCE_JQ1</string>
              <string>LY1_WCE_JQ1_2</string>
              <string>LY1_WCE_WT</string>
              <string>MM1S_BRD4_150nM_JQ1</string>
              <string>MM1S_BRD4_500nM_JQ1</string>
              <string>MM1S_BRD4_50nM_JQ1</string>
              <string>MM1S_BRD4_5nM_JQ1</string>
              <string>MM1S_BRD4_5uM_JQ1</string>
              <string>MM1S_BRD4_DMSO_1</string>
              <string>MM1S_BRD4_DMSO_2</string>
              <string>MM1S_BRD4_DMSO_MERGED</string>
              <string>MM1S_CDK9_500nM_JQ1</string>
              <string>MM1S_CDK9_50nM_JQ1</string>
              <string>MM1S_CDK9_5nM_JQ1</string>
              <string>MM1S_CDK9_5uM_JQ1</string>
              <string>MM1S_CDK9_DMSO_1</string>
              <string>MM1S_CDK9_DMSO_2</string>
              <string>MM1S_CDK9_DMSO_MERGED</string>
              <string>MM1S_CTCF</string>
              <string>MM1S_DOT1L_LARS</string>
              <string>MM1S_GR_DMSO</string>
              <string>MM1S_H3K27AC_DMSO</string>
              <string>MM1S_H3K4ME3_DMSO</string>
              <string>MM1S_IRF4</string>
              <string>MM1S_MED1_500nM_JQ1</string>
              <string>MM1S_MED1_50nM_JQ1</string>
              <string>MM1S_MED1_5nM_JQ1</string>
              <string>MM1S_MED1_5uM_JQ1</string>
              <string>MM1S_MED1_DMSO_1</string>
              <string>MM1S_MED1_DMSO_2</string>
              <string>MM1S_MED_DMSO_MERGED</string>
              <string>MM1S_MYC_DMSO</string>
              <string>MM1S_NFKB_MERGED</string>
              <string>MM1S_RNA_POL2_150nM_JQ1</string>
              <string>MM1S_RNA_POL2_24hr_JQ1</string>
              <string>MM1S_RNA_POL2_500nM_JQ1</string>
              <string>MM1S_RNA_POL2_50nM_JQ1</string>
              <string>MM1S_RNA_POL2_5nM_JQ1</string>
              <string>MM1S_RNA_POL2_5uM_JQ1</string>
              <string>MM1S_RNA_POL2_DMSO</string>
              <string>MM1S_RNA_POL2_DMSO_2</string>
              <string>MM1S_RNA_POL2_DMSO_MERGED</string>
              <string>MM1S_WCE_500nM_JQ1</string>
              <string>MM1S_WCE_50nM_JQ1</string>
              <string>MM1S_WCE_5nM_JQ1</string>
              <string>MM1S_WCE_5uM_JQ1</string>
              <string>MM1S_WCE_DMSO_1</string>
              <string>MM1S_WCE_DMSO_2</string>
              <string>MM1S_WCE_DMSO_MERGED</string>
              <string>MM1S_WCE_GR</string>
              <string>MM1S_WCE_WT</string>
              <string>MM1S_p50</string>
              <string>MM1S_p65</string>
              <string>BE2C_BRD4</string>
              <string>BE2C_H3K27AC</string>
              <string>BE2C_H3K4ME3</string>
              <string>BE2C_MYC</string>
              <string>BE2C_MYCN</string>
              <string>BE2C_RNA_POL2</string>
              <string>BE2C_WCE</string>
              <string>SKNAS_BRD4</string>
              <string>SKNAS_H3K27AC</string>
              <string>SKNAS_H3K4ME3</string>
              <string>SKNAS_MYC</string>
              <string>SKNAS_MYCN</string>
              <string>SKNAS_RNA_POL2</string>
              <string>SKNAS_WCE</string>
              <string>SKNAS_WCE_2</string>
            </a>
          </choices>
        </hudson.model.ChoiceParameterDefinition>
        <hudson.model.StringParameterDefinition>
          <name>gff</name>
          <description>&lt;p&gt;Enter .gff or genomic region e.g. chr1:+:1-1000</description>
          <defaultValue>chr6:+:332864-356961</defaultValue>
        </hudson.model.StringParameterDefinition>
        <hudson.model.ChoiceParameterDefinition>
          <name>y_scale</name>
          <description>&lt;p&gt;Choose either relative or uniform y axis scaling</description>
          <choices class="java.util.Arrays$ArrayList">
            <a class="string-array">
              <string>UNIFORM</string>
              <string>RELATIVE</string>
            </a>
          </choices>
        </hudson.model.ChoiceParameterDefinition>
        <hudson.model.StringParameterDefinition>
          <name>color</name>
          <description>&lt;p&gt;an RGB value, e.g. 255,100,100 is a shade of red</description>
          <defaultValue>255,100,100</defaultValue>
        </hudson.model.StringParameterDefinition>
        <hudson.model.StringParameterDefinition>
          <name>email</name>
          <description>&lt;p&gt;Email addresss that the generated map will be emailed to, not required if you are logged in and have set your email address.

&lt;p&gt;You can &lt;a href=&quot;../../login&quot;&gt;log in&lt;/a&gt; using your TOD Linux user name and password.  You can configure your email address by clicking your name at &lt;a href=&quot;../../asynchPeople/&quot;&gt;the people page&lt;/a&gt; and then clicking the &quot;Configure&quot; &lt;img src=&quot;../../static/3880e91f/images/24x24/setting.png&quot; alt=&quot;configure_icon&quot;&gt;link.

&lt;p&gt;Even if no address is provided, the generated map will be available in the build history artifacts when it is complete.
&lt;p&gt;
&lt;p&gt;</description>
          <defaultValue></defaultValue>
        </hudson.model.StringParameterDefinition>
      </parameterDefinitions>
    </hudson.model.ParametersDefinitionProperty>
  </properties>
  <scm class="hudson.plugins.git.GitSCM" plugin="git@1.4.0">
    <configVersion>2</configVersion>
    <userRemoteConfigs>
      <hudson.plugins.git.UserRemoteConfig>
        <name></name>
        <refspec></refspec>
        <url>https://github.com/bradnerComputation/pipeline.git</url>
      </hudson.plugins.git.UserRemoteConfig>
    </userRemoteConfigs>
    <branches>
      <hudson.plugins.git.BranchSpec>
        <name>**</name>
      </hudson.plugins.git.BranchSpec>
    </branches>
    <disableSubmodules>false</disableSubmodules>
    <recursiveSubmodules>false</recursiveSubmodules>
    <doGenerateSubmoduleConfigurations>false</doGenerateSubmoduleConfigurations>
    <authorOrCommitter>false</authorOrCommitter>
    <clean>false</clean>
    <wipeOutWorkspace>false</wipeOutWorkspace>
    <pruneBranches>false</pruneBranches>
    <remotePoll>false</remotePoll>
    <ignoreNotifyCommit>false</ignoreNotifyCommit>
    <useShallowClone>false</useShallowClone>
    <buildChooser class="hudson.plugins.git.util.DefaultBuildChooser"/>
    <gitTool>Default</gitTool>
    <submoduleCfg class="list"/>
    <relativeTargetDir></relativeTargetDir>
    <reference></reference>
    <excludedRegions></excludedRegions>
    <excludedUsers></excludedUsers>
    <gitConfigName></gitConfigName>
    <gitConfigEmail></gitConfigEmail>
    <skipTag>false</skipTag>
    <includedRegions></includedRegions>
    <scmName></scmName>
  </scm>
  <canRoam>true</canRoam>
  <disabled>false</disabled>
  <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
  <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
  <triggers/>
  <concurrentBuild>true</concurrentBuild>
  <builders>
    <hudson.tasks.Shell>
      <command>rm -rf output # remove any prior output directories
mkdir output  # create a new output directory

temporaryBamTable=/ark/home/jenkins/jobs/Bam_Plot/placeholder_data/masterBamTable.txt
arguments=`python ~/scripts/bamPlotArgumentsFromTable.py $temporaryBamTable $selection`

# arguments is something like &quot;/ifs/labs/bradner/bam/hg18/mm1s/05242012_D0WUYACXX_3.ACAGTG.hg18.bwt.sorted.bam -g HG18&quot;

python bamPlot.py -n $selection -i $gff -y $y_scale -t plot_`date +&quot;%Y-%m-%d_%H%M&quot;`.pdf -o `pwd`/output/ -p SINGLE -b $arguments -c $color</command>
    </hudson.tasks.Shell>
  </builders>
  <publishers>
    <hudson.tasks.ArtifactArchiver>
      <artifacts>output/*.pdf</artifacts>
      <latestOnly>false</latestOnly>
      <allowEmptyArchive>false</allowEmptyArchive>
    </hudson.tasks.ArtifactArchiver>
    <hudson.plugins.emailext.ExtendedEmailPublisher plugin="email-ext@2.30.2">
      <recipientList>$email</recipientList>
      <configuredTriggers>
        <hudson.plugins.emailext.plugins.trigger.SuccessTrigger>
          <email>
            <recipientList></recipientList>
            <subject>$PROJECT_DEFAULT_SUBJECT</subject>
            <body>Attached is the bam plot pdf generated with the following parameters:

$PROJECT_DEFAULT_CONTENT</body>
            <sendToDevelopers>false</sendToDevelopers>
            <sendToRequester>true</sendToRequester>
            <includeCulprits>false</includeCulprits>
            <sendToRecipientList>true</sendToRecipientList>
            <attachmentsPattern></attachmentsPattern>
            <attachBuildLog>false</attachBuildLog>
            <compressBuildLog>false</compressBuildLog>
            <replyTo></replyTo>
          </email>
        </hudson.plugins.emailext.plugins.trigger.SuccessTrigger>
        <hudson.plugins.emailext.plugins.trigger.FailureTrigger>
          <email>
            <recipientList></recipientList>
            <subject>Bam Plot PDF Generation Failed - $selection</subject>
            <body>Bam plot pdf generation failed with the following parameters.  Please confirm that your gff and color is valid.  For assistance, please forward this email to a developer.

$PROJECT_DEFAULT_CONTENT</body>
            <sendToDevelopers>false</sendToDevelopers>
            <sendToRequester>true</sendToRequester>
            <includeCulprits>false</includeCulprits>
            <sendToRecipientList>true</sendToRecipientList>
            <attachmentsPattern></attachmentsPattern>
            <attachBuildLog>false</attachBuildLog>
            <compressBuildLog>false</compressBuildLog>
            <replyTo></replyTo>
          </email>
        </hudson.plugins.emailext.plugins.trigger.FailureTrigger>
      </configuredTriggers>
      <contentType>default</contentType>
      <defaultSubject>Generated Bam Plot PDF - $selection</defaultSubject>
      <defaultContent>selection: $selection
gff: $gff
y_scale: $y_scale
color: $color

--------

$DEFAULT_CONTENT</defaultContent>
      <attachmentsPattern>output/*.pdf</attachmentsPattern>
      <presendScript></presendScript>
      <attachBuildLog>false</attachBuildLog>
      <compressBuildLog>false</compressBuildLog>
      <replyTo>$DEFAULT_REPLYTO</replyTo>
      <saveOutput>false</saveOutput>
    </hudson.plugins.emailext.ExtendedEmailPublisher>
  </publishers>
  <buildWrappers/>
</project>